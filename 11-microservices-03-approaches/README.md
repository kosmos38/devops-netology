## Домашнее задание к занятию "11.03 Микросервисы: подходы"

# Задача 1: Обеспечить разработку

На выполнение данных требований, отлично ложится применение GitLab + Hashicorp Vault.
Продукт имеет как облачную реализацию, так и возможность развернуть продукт на собственном сервере.
Имеется GitLab Kubernetes Agent, который позволяет пользоваться преимуществами быстрых развёртываний на кластере благодаря вытягиванию изменений из GitLab.
Для безопасного хранения секретных данных в связке с GitLab будет весьма кстати Hashicorp Vault, современное SaaS решение для управления учетными данными.

GitLab популярен, отлично поддерживается и удобен в использовании. Лично мне в сравнении с TeamCity он больше понравился в использовании. 
Jenkins в учет не беру в связи с отсутствием облачной версии, хоть и при кастомной настройке он имеет огромный функционал.


# Задача 2: Логи

Для обеспечения сбора и анализа логов сервисов в микросервисной архитектуре я выберу стек EFK (Elasticsearch + Fluentd + Kibana).
Популярный стек ELK (Elasticsearch + Logstash + Kibana) устарел из-за не очень производительного и при этом ресурсоёмкого Logstash.
Так как мы планируем микросервисную архитектуру и вероятно будем использовать Kubernetes, то я решил вместо Logstash использвать Fluentd.
Предложенное мной решение проверено временем и является бесплатным.

Elasticsearch — сердце всего проекта, именно на нем лежит задача приема, хранения, обработки и поиска всех сущностей.
Fluentd — коллектор, который берет на себя роль приема всех логов, их последующего парсинга и бережного укладывания этого всего добра в индексы Elasticsearch.
Kibana — представляет информацию в удобном веб-интерфейсе. Есть графики, фильтры, умеет работать с API Elasticsearch, получать и отображать полученные данные и многое другое.
 


# Задача 3: Мониторинг

Для обеспечения сбора и анализа состояния хостов и сервисов в микросервисной архитектуре, я выбираю связку Grafana + Prometheus.
Данная связка полностью удовлетворяет предъявленным требованиям, является популярным решением в нынешнее время и имеет огромный функционал.

Prometheus - центральный сервер, предназначенный для сбора и хранения данных, умеет работать с различными экспортерами (Node_exporter, Mysqld_exporter, Postgres_exporter, Windows_exporter). Хранит данные в TSDB (Time Series Data Base).

Grafana - удобный frontend для визуализации накопленных данных, может использоваться для работы с данными сервера Prometheus, предоставляет различные преднастроенные Dashboard для отображения данных.

По умолчанию Prometheus использует Pull-модель, это удобно в микросервисной архитектуре.
Когда мы работаем с большим количеством микросервисов, и каждый из них отправляет данные в систему мониторинга, можно столкнуться с риском отправки слишком большого количества данных на сервер Prometheus, а это может привести его выходу из строя. 
Prometheus предоставляет централизованное управление сбором метрик, т.е. мы самостоятельно решаем, откуда и как часто забирать данные. 
Prometheus — система мониторинга, разработанная специально для динамически изменяющейся среды. 
Кроме того, она может использоваться для традиционной инфраструктуры, например, на физических серверах с приложениями, развернутыми непосредственно на ОС.
