# Домашнее задание к занятию "10.01. Зачем и что нужно мониторить"

>1. Вас пригласили настроить мониторинг на проект. 
>На онбординге вам рассказали, что проект представляет из себя >платформу для вычислений с выдачей текстовых отчетов, которые сохраняются на диск. >Взаимодействие с платформой осуществляется по протоколу http. Также вам отметили, что вычисления загружают ЦПУ.
>Какой минимальный набор метрик вы выведите в мониторинг и почему?

#### CPUs utilization 

Процессорное время — время, затраченное процессором на обработку задачи. Иногда имеет смысл смотреть отдельно по ядрам.


#### IOwait 
Показатель, означающий процентное соотношение времени процессора, потраченное на ожидание ввода/вывода. К примеру, если серверу требовалось бы возвращать 100 или более файлов на каждый запрос, вполне вероятно, это стало бы причиной значительного роста времени %iowait, что означало бы, что диск является узким местом.


#### System Load Average

Текущая загрузка системы, то есть количество процессов, использующих CPU или ожидающих системных ресурсов.


#### Disk I/O Bandwidth 

Пропускная спопобность диска.


#### Disk Space Usage
Использование дискового пространства.


#### Disk Files (inodes) Usage

Во многих типах реализаций файловых систем максимальное количество inodes фиксируется при создании файловой системы, 
ограничивая максимальное количество файлов, которое файловая система может содержать. На устройстве могут закончиться inodes, когда это происходит, новые файлы не могут быть созданы на устройстве, даже если есть свободное место на диске. Важно следить за данной метрикой и настроить оповещения!


#### System RAM
Использование системной оперативной памяти.


#### System Swap
Использование памяти подкачки системы. Пространство подкачки используется, когда объем физической памяти (RAM) заполнен. Наблюдая за наполнением swap, сможем сделать вывод о том что требуется увеличение объема RAM.


#### Network Bandwidth
Пропускная способность на сетевом интерфейсе. 
Важно наблюдать, при необходимости принимать меры по ограничению канала или увеличению пропускной способности.


>2. Менеджер продукта посмотрев на ваши метрики сказал, что ему >непонятно что такое RAM/inodes/CPUla. 
>Также он сказал, что хочет понимать, насколько мы выполняем свои >обязанности перед клиентами и какое качество обслуживания. 
>Что вы можете ему предложить?

- В данном случае можно наблюдать за кодами состояния HTTP, количество 4XX/5XX ответов будет показывать о неудачных ответах сервера клиенту
- Количество запросов в единицу времени: час, секунду, день, минуту — зависит от обилия трафика в вашей программе.
- Сколько пользователей зарегистрировано в системе
- Сколько пользователей пользуется приложением раз в единицу времени


>3. Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики в свою очередь хотят видеть все ошибки, которые >выдают их приложения. 
>Какое решение вы можете предпринять в этой ситуации, чтобы разработчики получали ошибки приложения?

Здесь я бы рассмотрел Sentry, можно использовать бесплатно, правда с ограничениями командной работы, но вполне реально.
Sentry - это централизованная система управления журналами, которая позволяет отловить ошибки в коде, анализируя журналы.
На панели инструментов можно просматривать более подробные отчеты, такие как сортировка и фильтрация по категории ненормальной информации, 
а также статистику недавнего ненормального статуса и частоты, что очень удобно.


>4. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов. Вычисляете этот параметр по следующей формуле: >summ_2xx_requests/summ_all_requests. Данный параметр не поднимается выше 70%, но при этом в вашей системе нет >кодов ответа 5xx и 4xx. 
>Где у вас ошибка?

Ошибка в том что не учитываются 3xx ответы. 
Правильно считать SLA по формуле (summ_2xx_requests + summ_3xx_requests)/(summ_all_requests)





