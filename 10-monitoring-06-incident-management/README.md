# Домашнее задание к занятию "10.06. Инцидент-менеджмент"

| Postmortem                     | Анализ после инцидента, сбой БД GitHub |
| ------------------------------ | -------------------------- |
| Краткое описание инцидента     | Ухудшение качества обслуживания сроком на 24 часа 11 минут |
| Предшествующие события         | 21 октября в 22:52 UTC плановые работы по обслуживанию по замене вышедшего из строя оптического оборудования 100G  |
| Причина инцидента              | Потеря связи между датацентрами. Связь между этими точками была восстановлена ​​за 43 секунды, но этот сбой вызвал цепочку событий, которые привели к ухудшению качества обслуживания |
| Воздействие                    | Нарушение целостности кластеров баз данных  |
| Обнаружение                    | 21 октября 2018, 22:54 UTC внутренние системы мониторинга начали генерировать предупреждения, указывающие на то, что в наших системах возникло множество неисправностей |
| Реакция                        | 2018 21 октября 23:07 UTC К этому моменту команда разработчиков решила вручную заблокировать наши внутренние инструменты развертывания, чтобы предотвратить внесение каких-либо дополнительных изменений |
| Восстановление                 | Выполнили аварийное переключение на исходную топологию, решив проблемы с задержкой/доступностью. Устранили несоответствие данных при помощи двоичных журналов MySQL, содержащие записи, которые мы сделали на нашем основном сайте, которые не были реплицированы с дополнительных сайтов |
| Таймлайн                       | 21 октября 2018, 22:52 UTC Переключение кластера в резервеный ЦОД после сетевого сбоя |
|                                | 21 октября 2018, 22:54 UTC Поступили оповещения в систему мониторинга |
|                                | 21 октября 2018, 23:07 UTC Блокировка внутренних инструментов развертывания |
|                                | 21 октября 2018, 23:13 UTC Вызваны дополнительные инженеры из группы разработки баз данных |
|                                | 21 Октября 2018, 23:19 UTC Остановка записи в кластер. Приоритет целостности данных |
|                                | 22 октября 2018, 00:41 UTC Запущен процесс резервного копирования всех затронутых кластеров MySQL |
|                                | 22 октября 2018, 06:51 UTC Закончкен процесс восстановления, запущен процесс репликации новых данных |
|                                | 22 октября 2018, 07:46 UTC Сообщение пользователям, о сбое в работе сервиса |
|                                | 22 октября 2018, 16:24 UTC Реплики синхронизированы, выполнено аварийное переключение на исходную топологию, решены  проблемы с задержкой/доступностью |
|                                | 22 октября 2018, 16:45 UTC Балансировка увеличившейся нагрузки |
|                                | 22 октября 2018, 23:03 UTC Статус инцидента переведён в "зеленый". Система исправна |
| Последующие действия           | Изменили конфигурацию Orchestrator. Обновили (расширили) механизм отчетности о статусах инцидентах. Организовали проект по поддержке резервирования N + 1 на уровне объекта, цель - выдержать полный отказ одного ЦОД без воздействия на пользователя.


